"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.resetTextTransform = exports.setTextTransform = void 0;
var card_1 = __importDefault(require("../models/card"));
var catalog_1 = __importDefault(require("../models/catalog"));
var list_1 = __importDefault(require("../models/list"));
var magic_set_1 = __importDefault(require("../models/magic-set"));
var generic_scryfall_response_1 = __importDefault(require("../models/generic-scryfall-response"));
var transformFunction;
var noopTransformFunction = function (text) {
    // noop by default
    return text;
};
function setTextTransform(func) {
    transformFunction = func;
}
exports.setTextTransform = setTextTransform;
function resetTextTransform() {
    setTextTransform(noopTransformFunction);
}
exports.resetTextTransform = resetTextTransform;
resetTextTransform();
// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types
function wrapScryfallResponse(response) {
    if (typeof response === "string") {
        return transformFunction(response);
    }
    if (!response || typeof response !== "object") {
        return response;
    }
    if (response.object === "list" || response.object === "catalog") {
        response.data = response.data.map(wrapScryfallResponse);
        if (response.object === "list") {
            return new list_1.default(response);
        }
        else if (response.object === "catalog") {
            return new catalog_1.default(response);
        }
    }
    Object.keys(response).forEach(function (key) {
        response[key] = wrapScryfallResponse(response[key]);
    });
    if (response.object === "card") {
        return new card_1.default(response);
    }
    else if (response.object === "set") {
        return new magic_set_1.default(response);
    }
    else if (response.object) {
        return new generic_scryfall_response_1.default(response);
    }
    return response;
}
exports.default = wrapScryfallResponse;
